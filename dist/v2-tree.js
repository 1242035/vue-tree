!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VTree",[],t):"object"==typeof exports?exports.VTree=t():e.VTree=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);r.a.install=function(e){e.component("VTree",r.a)},t.default=r.a},function(e,t,n){"use strict";function r(e){n(2)}var i=n(4),a=n(7),o=n(3),d=r,c=o(i.a,a.a,!1,d,null,null);t.a=c.exports},function(e,t){},function(e,t){e.exports=function(e,t,n,r,i,a){var o,d=e=e||{},c=typeof e.default;"object"!==c&&"function"!==c||(o=e,d=e.default);var l="function"==typeof d?d.options:d;t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId=i);var s;if(a?(s=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=s):r&&(s=r),s){var h=l.functional,u=h?l.render:l.beforeCreate;h?(l._injectStyles=s,l.render=function(e,t){return s.call(t),u(e,t)}):l.beforeCreate=u?[].concat(u,s):[s]}return{esModule:o,exports:d,options:l}}},function(e,t,n){"use strict";var r=n(5),i=n(6),a=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,d=e[Symbol.iterator]();!(r=(o=d.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.a={name:"Tree",mixins:[i.a],props:{data:{type:Array,default:function(){return[]}},parent:{type:Object,default:function(){return null}},multiple:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},dragAfterExpanded:{type:Boolean,default:!0},halfcheck:{type:Boolean,default:!1},scoped:{type:Boolean,default:!1},tpl:Function},components:{Render:r.a},watch:{data:function(){this.initHandle()}},mounted:function(){var e=this;this.$on("childChecked",function(t,n){if(t.children&&t.children.length){var r=!0,i=!1,a=void 0;try{for(var o,d=t.children[Symbol.iterator]();!(r=(o=d.next()).done);r=!0){var c=o.value;e.$set(c,"checked",n),e.$emit("nodeChecked",c,n)}}catch(e){i=!0,a=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw a}}}}),this.$on("parentChecked",function(t,n){if(e.$set(t,"checked",n),!t.parent)return!1;var r=t.parent.children.some(function(e){return e.checked}),i=t.parent.children.every(function(e){return e.checked});if(e.halfcheck){if(i?e.$set(t.parent,"halfcheck",!1):r?e.$set(t.parent,"halfcheck",!0):e.$set(t.parent,"halfcheck",!1),!n&&r)return e.$set(t.parent,"halfcheck",!0),!1;e.$emit("parentChecked",t.parent,n)}else n&&i&&e.$emit("parentChecked",t.parent,n),n||e.$emit("parentChecked",t.parent,n)}),this.$on("nodeChecked",function(t,n){e.scoped?e.$set(t,"checked",n):(e.$emit("parentChecked",t,n),e.$emit("childChecked",t,n))}),this.$on("toggleshow",function(t,n){e.$set(t,"visible",n),n&&t.parent&&e.$emit("toggleshow",t.parent,n)}),this.$on("cancelSelected",function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.$children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,d=!0,c=!1,l=void 0;try{for(var s,h=o.data[Symbol.iterator]();!(d=(s=h.next()).done);d=!0){var u=s.value;o.$set(u,"selected",!1)}}catch(e){c=!0,l=e}finally{try{!d&&h.return&&h.return()}finally{if(c)throw l}}o.$children&&o.$emit("cancelSelected",o)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}),this.initHandle()},methods:{drop:function(e,t){t.preventDefault(),t.stopPropagation();var n=t.dataTransfer.getData("guid"),r=this.getDragNode(n);if(r.parent===e||null===r.parent)return!1;if(this.hasInGenerations(r,e))return!1;var i=r.parent.children;e.children&&-1===e.children.indexOf(r)?(e.children.push(r),i.splice(i.indexOf(r),1)):(this.$set(e,"children",[r]),i.splice(i.indexOf(r),1)),this.$set(e,"expanded",this.dragAfterExpanded),this.$emit("drag-node-end",{dragNode:r,targetNode:e})},drag:function(e,t){var n=this.guid();this.setDragNode(n,e),t.dataTransfer.setData("guid",n)},dragover:function(e){e.preventDefault(),e.stopPropagation()},initHandle:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.data[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this.$set(a,"parent",this.parent)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}},expandNode:function(e){this.$set(e,"expanded",!e.expanded)},isLeaf:function(e){return!(e.children&&e.children.length)},addNode:function(e,t){this.$set(e,"expanded",!0);var n=null;if(void 0===t)throw new ReferenceError("newNode is required but undefined");if("string"==typeof t)n={title:t};else{if(t&&!t.hasOwnProperty("title"))throw new ReferenceError("the property (title) is missed");n=t}this.isLeaf(e)?(this.$set(e,"children",[]),e.children.push(n)):e.children.push(n),this.$emit("addNode",{parentNode:e,newNode:t})},addNodes:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var d=a.value;this.addNode(e,d)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}},nodeClick:function(e){this.$emit("node-click",e)},dragNodeEnd:function(e){this.$emit("drag-node-end",e)},delNode:function(e,t){if(null===e||void 0===e)throw new ReferenceError("the root element can't deleted!");e.children.splice(e.children.indexOf(t),1),this.$emit("delNode",{parentNode:e,delNode:t})},changeNodeCheckStatus:function(e,t){this.$emit("nodeChecked",e,t.target.checked)},nodeSelected:function(e){var t=function e(t){return"UL"===t.$parent.$el.nodeName?(t=t.$parent,e(t)):t}(this);if(!this.multiple){var n=!0,r=!1,i=void 0;try{for(var a,o=t.data[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var d=a.value;this.$set(d,"selected",!1)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}this.$emit("cancelSelected",t)}this.multiple&&this.$set(e,"checked",!e.selected),this.$set(e,"selected",!e.selected),this.$emit("node-click",e)},getNodes:function(e,t){t=t||this.data;var n=[],r=!0,i=!1,o=void 0;try{for(var d,c=t[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var l=d.value,s=!0,h=!0,u=!1,f=void 0;try{for(var p,v=Object.entries(e)[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var y=p.value,x=a(y,2),g=x[0],m=x[1];if(l[g]!==m){s=!1;break}}}catch(e){u=!0,f=e}finally{try{!h&&v.return&&v.return()}finally{if(u)throw f}}s&&n.push(l),l.children&&l.children.length&&(n=n.concat(this.getNodes(e,l.children)))}}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n},getSelectedNodes:function(){return this.getNodes({selected:!0},this.data)},getCheckedNodes:function(){return this.getNodes({selected:!0},this.data)},searchNodes:function(e,t){t=t||this.data;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var d=a.value,c=!!e&&("function"==typeof e?e(d):d.title.indexOf(e)>-1);this.$set(d,"searched",c),this.$set(d,"visible",!1),this.$emit("toggleshow",d,!e||c),d.children&&d.children.length&&(c&&this.$set(d,"expanded",!0),this.searchNodes(e,d.children))}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}}}},function(e,t,n){"use strict";t.a={name:"render",functional:!0,props:{node:Object,tpl:Function},render:function(e,t){var n=t.props.node.selected?"node-title node-selected":"node-title";return t.props.node.searched&&(n+=" node-searched"),t.props.tpl?t.props.tpl(t.props.node,t):e("span",{domProps:{innerHTML:t.props.node.title},class:n,on:{click:function(){return t.parent.nodeSelected(t.props.node)}}},[])}}},function(e,t,n){"use strict";function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function i(e,t){window.treeDrag={},window.treeDrag[e]=t}function a(e){return window.treeDrag[e]}function o(e,t){if(e.hasOwnProperty("children")&&e.children){var n=!0,r=!1,i=void 0;try{for(var a,d=e.children[Symbol.iterator]();!(n=(a=d.next()).done);n=!0){var c=a.value;if(c===t)return!0;if(c.children)return o(c,t)}}catch(e){r=!0,i=e}finally{try{!n&&d.return&&d.return()}finally{if(r)throw i}}return!1}}t.a={methods:{guid:r,setDragNode:i,getDragNode:a,hasInGenerations:o}}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"halo-tree"},e._l(e.data,function(t,r){return n("li",{directives:[{name:"show",rawName:"v-show",value:!t.hasOwnProperty("visible")||t.visible,expression:"item.hasOwnProperty('visible') ? item.visible : true"}],key:t.title,class:{leaf:e.isLeaf(t),"first-node":!e.parent&&0===r,"only-node":!e.parent&&1===e.data.length},on:{drop:function(n){e.drop(t,n)},dragover:function(t){e.dragover(t)}}},[n("div",{staticClass:"tree-node-el",attrs:{draggable:e.draggable},on:{dragstart:function(n){e.drag(t,n)}}},[t.children&&t.children.length>0?n("span",{class:t.expanded?"tree-open":"tree-close",on:{click:function(n){e.expandNode(t)}}}):e._e(),e._v(" "),e.multiple&&!t.nocheck?n("div",{class:[t.checked?t.halfcheck?"box-halfchecked":"box-checked":"box-unchecked","inputCheck"]},[e.multiple?n("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],class:["check",t.chkDisabled?"chkDisabled":""],attrs:{disabled:t.chkDisabled,type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{change:[function(n){var r=t.checked,i=n.target,a=!!i.checked;if(Array.isArray(r)){var o=e._i(r,null);i.checked?o<0&&(t.checked=r.concat([null])):o>-1&&(t.checked=r.slice(0,o).concat(r.slice(o+1)))}else e.$set(t,"checked",a)},function(n){e.changeNodeCheckStatus(t,n)}]}}):e._e()]):e._e(),e._v(" "),n("Render",{attrs:{node:t,tpl:e.tpl}}),e._v("\n            "+e._s(t.level)+"\n        ")],1),e._v(" "),n("transition",{attrs:{name:"bounce"}},[e.isLeaf(t)?e._e():n("tree",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"item.expanded"}],attrs:{dragAfterExpanded:e.dragAfterExpanded,draggable:e.draggable,tpl:e.tpl,data:t.children,halfcheck:e.halfcheck,scoped:e.scoped,parent:t,multiple:e.multiple},on:{"node-click":e.nodeClick,"drag-node-end":e.dragNodeEnd}})],1)],1)}))},i=[],a={render:r,staticRenderFns:i};t.a=a}])});
//# sourceMappingURL=v2-tree.js.map